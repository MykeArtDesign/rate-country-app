{"ast":null,"code":"import _objectSpread from \"/Users/mykronphotography/Documents/De\\u0301veloppeur Web Junior/React/React-Redux-Starter-Create-React-App-master/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport axios from 'axios';\nexport const GET_COUNTRIES = \"GET_COUNTRIES\";\nexport const GET_RATE_EXCHANGE = \"GET_RATE_EXCHANGE\";\nexport function fetchCountries() {\n  return function (dispatch) {\n    axios.get('https://restcountries.eu/rest/v2/all').then(res => {\n      dispatch({\n        type: GET_COUNTRIES,\n        payload: res.data\n      });\n    });\n  };\n}\nexport function fetchRateExchange(country) {\n  return function (dispatch) {\n    axios.get(\"https://api.exchangeratesapi.io/history?start_at=\".concat(getlastMonth(), \"&end_at=\").concat(formatedDate(new Date()), \"&base=USD&symbols=\").concat(country.currencyCode)).then(res => {\n      dispatch({\n        type: GET_RATE_EXCHANGE,\n        payload: _objectSpread({\n          rates: res.data.rates\n        }, country)\n      });\n    });\n  };\n}\n\nfunction formatedDate(date) {\n  return date.toISOString().split('T')[0];\n}\n\nfunction getlastMonth() {\n  let now = new Date();\n  now.setMonth(now.getMonth() - 1);\n  return formatedDate(now);\n}","map":{"version":3,"sources":["/Users/mykronphotography/Documents/Développeur Web Junior/React/React-Redux-Starter-Create-React-App-master/src/actions/index.js"],"names":["axios","GET_COUNTRIES","GET_RATE_EXCHANGE","fetchCountries","dispatch","get","then","res","type","payload","data","fetchRateExchange","country","getlastMonth","formatedDate","Date","currencyCode","rates","date","toISOString","split","now","setMonth","getMonth"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,aAAa,GAAG,eAAtB;AACP,OAAO,MAAMC,iBAAiB,GAAG,mBAA1B;AAEP,OAAO,SAASC,cAAT,GAA0B;AAC/B,SAAO,UAAUC,QAAV,EAAoB;AACzBJ,IAAAA,KAAK,CAACK,GAAN,CAAU,sCAAV,EAAkDC,IAAlD,CAAuDC,GAAG,IAAI;AAC9DH,MAAAA,QAAQ,CAAC;AACPI,QAAAA,IAAI,EAACP,aADE;AAEPQ,QAAAA,OAAO,EAACF,GAAG,CAACG;AAFL,OAAD,CAAR;AAID,KALC;AAMD,GAPD;AAQD;AAED,OAAO,SAASC,iBAAT,CAA4BC,OAA5B,EAAqC;AAC1C,SAAO,UAAUR,QAAV,EAAoB;AACzBJ,IAAAA,KAAK,CAACK,GAAN,4DAA8DQ,YAAY,EAA1E,qBAAuFC,YAAY,CAAC,IAAIC,IAAJ,EAAD,CAAnG,+BAAoIH,OAAO,CAACI,YAA5I,GAA4JV,IAA5J,CAAiKC,GAAG,IAAI;AACtKH,MAAAA,QAAQ,CAAC;AACPI,QAAAA,IAAI,EAAEN,iBADC;AAEPO,QAAAA,OAAO;AACLQ,UAAAA,KAAK,EAAEV,GAAG,CAACG,IAAJ,CAASO;AADX,WAEFL,OAFE;AAFA,OAAD,CAAR;AAOD,KARD;AASD,GAVD;AAWD;;AAED,SAASE,YAAT,CAAsBI,IAAtB,EAA2B;AACzB,SAAOA,IAAI,CAACC,WAAL,GAAmBC,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CAAP;AACD;;AAED,SAASP,YAAT,GAAyB;AACvB,MAAIQ,GAAG,GAAG,IAAIN,IAAJ,EAAV;AACAM,EAAAA,GAAG,CAACC,QAAJ,CAAaD,GAAG,CAACE,QAAJ,KAAgB,CAA7B;AACA,SAAOT,YAAY,CAACO,GAAD,CAAnB;AACD","sourcesContent":["import axios from 'axios'\n\nexport const GET_COUNTRIES = \"GET_COUNTRIES\"\nexport const GET_RATE_EXCHANGE = \"GET_RATE_EXCHANGE\"\n\nexport function fetchCountries() {\n  return function (dispatch) {\n    axios.get('https://restcountries.eu/rest/v2/all').then(res => {\n    dispatch({\n      type:GET_COUNTRIES,\n      payload:res.data\n    })\n  })\n  }\n}\n\nexport function fetchRateExchange (country) {\n  return function (dispatch) {\n    axios.get(`https://api.exchangeratesapi.io/history?start_at=${getlastMonth()}&end_at=${formatedDate(new Date())}&base=USD&symbols=${country.currencyCode}`).then(res => {\n      dispatch({\n        type: GET_RATE_EXCHANGE,\n        payload: {\n          rates: res.data.rates,\n          ...country\n        }\n      })\n    })\n  }\n}\n\nfunction formatedDate(date){\n  return date.toISOString().split('T')[0]\n}\n\nfunction getlastMonth () {\n  let now = new Date()\n  now.setMonth(now.getMonth() -1)\n  return formatedDate(now)\n}"]},"metadata":{},"sourceType":"module"}